Free42 release HOWTO
Thomas Okken, 3/4/2009

1. Make sure the source repository in CVS on macmini is up to date; in
particular, check free42/HISTORY to see if it includes the new version number
and shows it with the correct date and the most recent changes.

2. Under Mac OS X, run free42/build-mac-desktop; this creates the MacDashboard
package, Free42MacDashboard.<version>.zip. Under Linux, run free42/build-linux;
this creates the linux package, Free42Linux.<version>.tgz. Under Windows, run
free42/build-all-except-linux; this creates package.tar, which in turn contains
the binaries packages for PalmOS, Pocket PC, and Windows
(Free42PalmOS.<version>.zip, Free42PocketPC.<version>.zip, and
 Free42Windows.<version>.zip), the skins packages for PalmOS, Pocket PC, and
Windows/Linux (Free42PalmOSSkins.<version>.zip,
Free42PocketPCSkins.<version>.zip, and Free42Skins.<version>.zip), the source
package, free42.<version>.tgz, and HTML versions of free42/HISTORY and
free42/TODO (history.html and todo.html).

3. Go to the Free42 home page at SourceForge, click the link at the end of the
"Supported Platforms" paragraph to go to the project management page, and log
in as thomasokken; under My Projects, click Free42; in the menu, click Admin ->
File Releases.

4. Click "Add Release" for the Free42 package. For the release name, enter the
Free42 release number, e.g. "1.4.47" (without the quotes). Click "Create This
Release". On the next page, under "Step 1: Edit Existing Release", paste the
contents of free42/HISTORY in the Change Log field, and paste the most recent
(topmost) item from free42/HISTORY in the Notes field. Check the "preserve my
pre-formatted text" checkbox and click "Submit/Refresh".
 
5. Launch a shell on shell.sourceforge.net:
"ssh -t thomasokken,free42@shell.sourceforge.net create"
This will remain active until explicitly terminated, or after some longish
timeout; for the activities in this guide, you shouldn't have to do this more
than once.

6. Copy the binary and source packages (Free42Linux.<version>.tgz,
Free42MacDashboard.<version>.zip, Free42PalmOS.<version>.zip,
Free42PocketPC.<version>.zip, Free42Windows.<version>.zip,
free42.<version>.tgz, history.html, todo.html) to shell.sourceforge.net:
"cd packagedir ; scp * thomasokken,free42@shell.sourceforge.net:uploads"

7. In the browser, under "Step 2: Add Files To This Release", click "Add Files
and/or Refresh View". The files you have just uploaded will appear. Check all
of them except history.html and todo.html; we'll deal with those two separately
later. Also note: the skins packages, Free42PalmOSSkins.<version>.zip,
Free42PocketPCSkins.<version>.zip, and Free42Skins.<version>.zip, do not belong
in the "Free42" package, but in the separate "Skins" package. This is handled
elsewhere in this document; for now, just be sure *not* to check the skins
packages at this point. (If you have new skins for release, see the
instructions at step 11.) After checking the appropriate packages, click "Add
Files and/or Refresh View" again.

8. Under "Step 3: Edit Files In This Release", select "Processor" and "File
Type" for each of the packages you added in step 7. Make the following
selections (note: you must make the selections and click "Update/Refresh for
each file separately; you can't do them all at once):
+----------------------------------+-------------------------+------------+
| File                             | Processor               | File Type  |
+----------------------------------+-------------------------+------------+
| free42.<version>.tgz             | Platform-Independent    | Source .gz |
| Free42Linux.<version>.tgz        | i386                    | .gz        |
| Free42MacDashboard.<version>.zip | Mac Universal (PPC/x86) | .zip       |
| Free42PalmOS.<version>.zip       | Any                     | .zip       |
| Free42PocketPC.<version>.zip     | ARM                     | .zip       |
| Free42Windows.<version>.zip      | i386                    | .zip       |
+----------------------------------+-------------------------+------------+
 Once all files have the correct processor and file type set, do "Step 4: Email
Release Notice": check "I'm sure" and click "Send Notice".

9. Go to the Manage Packages/Releases page, and click "Edit Releases" for the
Free42 package. Find the previous release (the one you're replacing), click its
"Edit This Release" link, and on the next page, under "Step 1: Edit Existing
Release", set the Status to "Hidden", and click "Submit/Refresh". (If you are
posting a new release that does not supersede all previous packages, as you
might want to do for a platform-specific bug fix, you'll obviously want to skip
this step.) In addition to making the old release "hidden", you should also be
a good SourceForge citizen and get rid of your old junk (i.e., clear the
release Notes, release Change Log, and delete all the files from the release;
effectively nuking the entire release).

10. Go to the web page static content area, /home/groups/f/fr/free42/htdocs.
Edit index.html and change all occurrences of the old release number to the
new, so people will actually get the right packages if they use the direct
download links. Also, copy history.html and todo.html from
/home/users/t/th/thomasokken/uploads to here, and finally, if the library
dependencies of the Linux version have changed, update index.html accordingly.

11. If you have new skins for release, click the Manage Packages/Releases link,
then click the "Edit Releases" link for the "Skins" package. There is only one
release, "current". Click on its "Edit This Release" link. For each skins
package you want to update, first delete the existing version under "Step 3:
Edit Files In This Release". Next, rename the skins packages in the uploads
directory to get rid of the version number in their filename, e.g.
Free42Skins.1.4.47.zip => Free42Skins.zip. Now, click "Add Files and/or Refresh
View"; the skins packages will appear under "Step 2: Add Files To This Release"
with their new names. Add all of them, and next, for each, set the Processor to
"Platform-Independent", and set the File Type to ".zip". When done, send an
email release notice, in case anyone is monitoring the package.
